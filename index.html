<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Ascension Lutheran Church & School</title>
    
    <!-- Test if CSS files load -->
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/components.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Fallback styles in case CSS files don't load */
        .debug-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: #ff4444;
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            z-index: 10000;
            max-width: 300px;
        }
        .debug-info.success {
            background: #44ff44;
            color: black;
        }
    </style>
</head>
<body>
    <!-- Debug Info Panel -->
    <div id="debug-info" class="debug-info">
        <strong>Debug Status:</strong><br>
        <span id="debug-status">Checking...</span>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="church-logo">
                <img src="./images/alc-logo.png" alt="Ascension Lutheran Church Logo" class="logo-img" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div style="display: none; width: 120px; height: 120px; background: #ccc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">‚úö</div>
            </div>
            <h1 class="loading-title">Ascension Lutheran Church</h1>
            <p class="loading-subtitle">Fort Wayne, Indiana</p>
            <div class="loading-spinner">
                <div class="spinner"></div>
            </div>
            <p class="loading-verse">"I am the way, and the truth, and the life." - John 14:6</p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app hidden">
        <!-- Navigation Header -->
        <header class="main-header">
            <nav class="navbar">
                <div class="nav-container">
                    <div class="nav-brand">
                        <img src="./images/alc-logo.png" alt="ALC Logo" class="nav-logo"
                             onerror="this.style.display='none';">
                        <div class="brand-text">
                            <h1 class="brand-name">Ascension Lutheran</h1>
                            <p class="brand-subtitle">Church & School</p>
                        </div>
                    </div>
                    
                    <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                    
                    <div class="nav-menu">
                        <a href="#home" class="nav-link active" data-page="home">Home</a>
                        <a href="#church" class="nav-link" data-page="church">Church</a>
                        <a href="#family" class="nav-link" data-page="family">Family</a>
                        <a href="#school" class="nav-link" data-page="school">School</a>
                        <a href="#worship" class="nav-link" data-page="worship">Worship</a>
                        <a href="#contact" class="nav-link" data-page="contact">Contact</a>
                    </div>
                </div>
            </nav>
        </header>

        <!-- Page Content Container -->
        <main id="page-container" class="page-container">
            <!-- Content will be loaded here -->
        </main>

        <!-- Quick Action Buttons -->
        <div class="quick-actions">
            <button class="action-btn" id="share-btn" aria-label="Share this page">
                <svg class="action-icon" viewBox="0 0 24 24">
                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                </svg>
            </button>
            
            <button class="action-btn" id="install-btn" aria-label="Install app" style="display: none;">
                <svg class="action-icon" viewBox="0 0 24 24">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
            </button>
            
            <a href="tel:+12604862226" class="action-btn" aria-label="Call church">
                <svg class="action-icon" viewBox="0 0 24 24">
                    <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                </svg>
            </a>
        </div>
    </div>

    <!-- Debug Script -->
    <script>
        console.log('üîß Debug script starting...');
        
        // Debug information tracker
        const debugInfo = {
            cssLoaded: false,
            jsFilesLoaded: [],
            jsErrors: [],
            domReady: false,
            appInitialized: false
        };

        function updateDebugDisplay() {
            const debugElement = document.getElementById('debug-info');
            const statusElement = document.getElementById('debug-status');
            
            let status = '';
            status += `CSS: ${debugInfo.cssLoaded ? '‚úÖ' : '‚ùå'}<br>`;
            status += `JS Files: ${debugInfo.jsFilesLoaded.join(', ')}<br>`;
            status += `DOM Ready: ${debugInfo.domReady ? '‚úÖ' : '‚ùå'}<br>`;
            status += `App Init: ${debugInfo.appInitialized ? '‚úÖ' : '‚ùå'}<br>`;
            
            if (debugInfo.jsErrors.length > 0) {
                status += `Errors: ${debugInfo.jsErrors.length}<br>`;
            }
            
            statusElement.innerHTML = status;
            
            // Change color based on status
            if (debugInfo.domReady && debugInfo.jsFilesLoaded.length >= 3) {
                debugElement.className = 'debug-info success';
            }
        }

        // Check if CSS loaded
        function checkCSSLoaded() {
            const testElement = document.createElement('div');
            testElement.className = 'loading-screen';
            document.body.appendChild(testElement);
            
            const styles = window.getComputedStyle(testElement);
            if (styles.position === 'fixed') {
                debugInfo.cssLoaded = true;
                console.log('üîß CSS files loaded successfully');
            } else {
                console.log('üîß CSS files failed to load');
            }
            
            document.body.removeChild(testElement);
            updateDebugDisplay();
        }

        // Track DOM ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                debugInfo.domReady = true;
                console.log('üîß DOM ready');
                updateDebugDisplay();
                checkCSSLoaded();
            });
        } else {
            debugInfo.domReady = true;
            checkCSSLoaded();
        }

        // Track JS file loading
        const originalError = window.onerror;
        window.onerror = function(message, source, lineno, colno, error) {
            console.error('üîß JavaScript error:', message, 'in', source);
            debugInfo.jsErrors.push({message, source, lineno});
            updateDebugDisplay();
            
            if (originalError) {
                return originalError.apply(this, arguments);
            }
        };

        // Check for app initialization
        setInterval(() => {
            if (window.app && !debugInfo.appInitialized) {
                debugInfo.appInitialized = true;
                console.log('üîß App initialized successfully');
                updateDebugDisplay();
            }
        }, 100);

        updateDebugDisplay();
    </script>

    <!-- JavaScript Files -->
    <script src="./js/components.js" onload="console.log('üîß components.js loaded'); debugInfo.jsFilesLoaded.push('components.js'); updateDebugDisplay();" onerror="console.error('üîß Failed to load components.js'); debugInfo.jsErrors.push('components.js failed to load'); updateDebugDisplay();"></script>
    
    <script src="./js/navigation.js" onload="console.log('üîß navigation.js loaded'); debugInfo.jsFilesLoaded.push('navigation.js'); updateDebugDisplay();" onerror="console.error('üîß Failed to load navigation.js'); debugInfo.jsErrors.push('navigation.js failed to load'); updateDebugDisplay();"></script>
    
    <script src="./js/app.js" onload="console.log('üîß app.js loaded'); debugInfo.jsFilesLoaded.push('app.js'); updateDebugDisplay();" onerror="console.error('üîß Failed to load app.js'); debugInfo.jsErrors.push('app.js failed to load'); updateDebugDisplay();"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
